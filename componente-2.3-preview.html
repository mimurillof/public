<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Componente 2.3: Resumen de Rendimiento con Narrativa</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Estilos adicionales si fueran necesarios */
        body { font-family: sans-serif; }
    </style>
</head>
<body class="bg-gray-100 p-8">

    <h1 class="text-2xl font-bold mb-6 text-center">Componente 2.3: Resumen de Rendimiento con Narrativa Automatizada (LLM)</h1>

    <!-- Contenedor principal simulando 7-8 columnas -->
    <div class="max-w-5xl mx-auto bg-white p-6 rounded-lg shadow-md">

        <!-- Contenedor Flex para gráfico y texto -->
        <div class="flex flex-col md:flex-row gap-6 md:gap-8">

            <!-- Área del Gráfico -->
            <div class="md:w-3/5">
                <h2 class="text-lg font-semibold mb-3">Evolución del Portafolio</h2>
                <div class="relative h-64 md:h-80">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>

            <!-- Área de la Narrativa Automatizada -->
            <div class="md:w-2/5 mt-6 md:mt-0">
                <h2 class="text-lg font-semibold mb-3">Resumen del Periodo</h2>
                <!-- Etiqueta Clara -->
                <p class="text-sm font-semibold text-blue-700 mb-2">Análisis Generado por IA:</p>
                <div class="text-sm text-gray-700 bg-gray-50 p-4 rounded border border-gray-200">
                    <p>Durante el último trimestre, el portafolio experimentó una volatilidad moderada, cerrando con un rendimiento neto del 2.5%. Los activos tecnológicos lideraron las ganancias, especialmente las acciones de 'TechCorp', que subieron un 15% tras resultados positivos.</p>
                    <p class="mt-2">Sin embargo, la exposición al sector energético restó 0.8% al rendimiento total debido a la caída de los precios del crudo. En comparación, el benchmark de referencia (S&P 500) obtuvo un 3.1% en el mismo periodo, indicando un ligero rendimiento inferior del portafolio ajustado por riesgo.</p>
                    <p class="mt-2">Se recomienda revisar la ponderación en el sector energético y considerar aumentar la exposición a mercados emergentes para diversificación.</p>
                </div>
            </div>

        </div>

    </div>

    <script>
        const ctx = document.getElementById('performanceChart').getContext('2d');
        const performanceChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                datasets: [{
                    label: 'Valor del Portafolio (€)',
                    data: [10000, 10200, 10150, 10500, 10450, 10700, 10800, 10750, 11000, 10900, 11200, 11300],
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1,
                    fill: false
                },
                {
                    label: 'Benchmark (MSCI World)',
                    data: [10000, 10100, 10200, 10350, 10500, 10600, 10750, 10900, 10950, 11100, 11150, 11400],
                    borderColor: 'rgb(255, 99, 132)',
                    tension: 0.1,
                    borderDash: [5, 5], // Línea discontinua para el benchmark
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false,
                        ticks: {
                            // Formato de moneda o número
                            callback: function(value, index, values) {
                                return '€' + value.toLocaleString('es-ES');
                            }
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    },
                    title: {
                        display: false, // El título ya está fuera del canvas
                        text: 'Evolución del Rendimiento del Portafolio'
                    }
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                }
            }
        });
    </script>

</body>
</html>
